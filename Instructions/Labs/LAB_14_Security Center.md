---
lab:
    title: '14 - 클라우드용 Microsoft Defender'
    module: '모듈 04 - 클라우드용 Microsoft Defender'
---

# 랩 14: 클라우드용 Microsoft Defender
# 학생 랩 매뉴얼

## 랩 시나리오

클라우드용 Microsoft Defender 기반 환경의 개념 증명을 작성하라는 요청을 받았습니다. 특히 다음을 수행해야 합니다.

- 클라우드용 Microsoft Defender를 구성하여 가상 머신을 모니터링합니다.
- 가상 머신에 대한 클라우드용 Microsoft Defender 권장 사항을 검토합니다.
- 게스트 구성 및 Just-In-Time VM 액세스에 대한 권장 사항을 구현합니다. 
- Secure Score를 사용하여 더욱 안전한 인프라를 만드는 진행 상황을 결정하는 방법을 검토합니다.

> 이 랩의 모든 리소스는 **미국 동부** 지역을 사용하고 있습니다. 이 지역을 수업에 사용할 것인지 강사에게 확인합니다. 

## 랩 목표

이 랩에서는 다음과 같은 연습을 완료합니다.

- 연습 1: 클라우드용 Microsoft Defender 구현

### 연습 1: 클라우드용 Microsoft Defender 구현

이 연습에서는 다음 작업을 수행합니다.

- 작업 1: 클라우드용 Microsoft Defender 구성
- 작업 2 클라우드용 Microsoft Defender 권장 사항 검토
- 작업 3: 클라우드용 Microsoft Defender 권장 사항을 구현하여 Just-In-Time VM 액세스를 사용하도록 설정

#### 작업 1: 클라우드용 Microsoft Defender 구성

이 작업에서는 클라우드용 Microsoft Defender를 온보딩하고 구성합니다.

1. Azure Portal **`https://portal.azure.com/`** 에 로그인합니다.

    >**참고**: 이 랩에 사용 중인 Azure 구독에 Owner 또는 Contributor 역할이 있는 계정을 사용하여 Azure Portal에 로그인합니다.

1. Azure Portal에서 Azure Portal 페이지 위쪽의 **리소스, 서비스 및 문서 검색** 텍스트 상자에 **클라우드용 Microsoft Defender**를 입력하고 **Enter** 키를 누릅니다.

1. **클라우드용 Microsoft Defender \| 시작** 블레이드에서 **업그레이드**를 클릭한 다음, **에이전트 설치**를 클릭합니다.
     
1. **클라우드용 Microsoft Defender \| 시작** 블레이드 왼쪽의 세로 메뉴에 있는 **관리** 섹션에서 **가격 책정 및 설정**을 클릭합니다.

1. **클라우드용 Microsoft Defender \| 가격 및 설정** 블레이드에서 구독을 나타내는 항목을 클릭하고 **설정 \| Azure Defender 플랜** 블레이드에서 **Azure Defender 켜기**가 선택되어 있는지 확인합니다. 

    >**참고**: Azure Defender 계층에 포함되어 제공되는 모든 기능을 검토하여 각 리소스 종류에 대해 Azure Defender가 켜져 있는지 확인합니다. 

1. 변경한 경우 **저장**을 클릭합니다.

1. **설정 \| Azure Defender 플랜** 블레이드에서 **모두 사용**을 선택하고 **저장**을 클릭합니다.

1. **설정 \| Azure Defender 플랜** 블레이드 왼쪽의 세로 메뉴에서 **자동 프로비전**을 클릭합니다.

1. **설정 \| 자동 프로비전** 블레이드에서 첫 번째 항목인 **Azure VM용 Log Analytics 에이전트**에 대해 **자동 프로비전**이 **켜기**로 설정되어 있는지 확인합니다. 

1. **설정 \| 자동 프로비저닝** 블레이드로 돌아와 왼쪽의 세로 메뉴에서 **워크플로 자동화**를 클릭합니다.

1. **설정 \| 워크플로 자동화** 블레이드에서 **+ 워크플로 자동화 추가**를 클릭합니다.

1. **워크플로 자동화 추가** 블레이드에서 사용 가능한 설정을 검토합니다. 

    >**참고**: 위협 탐지 경고 및 클라우드용 Microsoft Defender 권장 사항을 기반으로 작업을 트리거 할 수 있습니다. Logic Apps를 기반으로 작업을 구성할 수도 있습니다. 

1. **워크플로 자동화 추가** 블레이드에서 **취소**를 클릭합니다.

    >**참고**: 클라우드용 Microsoft Defender 시스템 업데이트 상태, OS 보안 구성 및 엔드포인트 보호를 포함한 가상 머신에 대한 많은 인사이트를 제공합니다.

1. **클라우드용 Microsoft Defender \| 가격 및 설정** 블레이드로 다시 이동하고, 이전 랩에서 만든 Log Analytics 작업 영역을 나타내는 항목을 클릭합니다.

1. **설정 \| Azure Defender 플랜** 블레이드에서 **Azure Defender 켜기**가 선택되어 있는지 확인하고 **저장**을 클릭합니다.


#### 작업 2 클라우드용 Microsoft Defender 권장 사항 검토

이 작업에서는 클라우드용 Microsoft Defender 권장 사항을 검토합니다. 

1. Azure Portal에서 **클라우드용 Microsoft Defender \| 개요** 블레이드로 다시 이동합니다. 

1. **클라우드용 Microsoft Defender \| 개요** 블레이드에서 **보안 점수** 타일을 검토합니다.

    >**참고**: 현재 점수가 표시되면 적어 둡니다.

1. **클라우드용 Microsoft Defender \| 개요** 블레이드에서 **평가된 리소스**를 선택합니다.

1. **인벤토리** 블레이드에서 **myVM** 항목을 선택합니다.

    >**참고**: 몇 분 기다렸다가 브라우저 페이지를 새로 고쳐야 항목이 표시될 수도 있습니다.
    
1. **리소스 상태** 블레이드의 **권장 사항** 탭에서 **myVM**에 대한 권장 사항 목록을 검토합니다.


#### 작업 3: 클라우드용 Microsoft Defender 권장 사항을 구현하여 Just-In-Time VM 액세스를 사용하도록 설정

이 작업에서는 가상 머신에서 Just-In-Time VM 액세스를 사용할 수 있도록 클라우드용 Microsoft Defender 권장 사항을 구현합니다. 

1. Azure Portal에서 **클라우드용 Microsoft Defender \| 개요** 블레이드로 다시 이동하여 **클라우드 보안** 타일 아래에서 **워크로드 보호**를 선택합니다.

1. **워크로드 보호** 블레이드의 **고급 보호** 섹션에서 **Just-In-Time VM 액세스** 타일을 클릭하고 **Just-In-Time VM 액세스 블레이드**에서 **Just-In-Time 액세스 시도**를 클릭합니다.

1. **Just-In-Time VM 액세스**에서 **구성되지 않음**을 선택한 후에 **myVM** 항목을 클릭합니다.

    >**참고**: **myVM** 항목을 사용할 수 있게 되기까지 몇 분간 기다려야 할 수도 있습니다.

1. **VM 1대에서 JIT 사용**을 선택합니다.

1. 포트 **22**를 참조하는 행의 맨 오른쪽에 있는 **JIT VM 액세스 구성** 블레이드에서 타원 단추를 클릭한 다음 **삭제**를 클릭합니다.

1. **JIT VM 액세스 구성** 블레이드에서 **저장**을 클릭합니다.

    >**참고**: 도구 모음의 **알림** 아이콘을 클릭하고 **알림** 블레이드를 확인하여 구성 진행 상황을 모니터링합니다. 

    >**참고**: 이 랩의 권장 사항을 구현하여 보안 점수가 반영되는 데 다소 시간이 걸릴 수 있습니다. 보안 점수를 주기적으로 확인하여 이러한 기능을 구현하는 데 미치는 영향을 확인합니다. 

> 결과: 클라우드용 Microsoft Defender를 온보딩하고 가상 머신 권장 사항을 구현했습니다. 


>**참고**: Azure Sentinel 랩에 필요하므로 이 랩에서 리소스를 제거하지 마십시오.
